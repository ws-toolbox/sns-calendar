<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SNS投稿カレンダー管理（共有ドライブ対応・UI改善）</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://apis.google.com/js/api.js"></script>
</head>
<body class="bg-gradient-to-br from-purple-50 to-blue-50 min-h-screen">
  <div id="app" class="max-w-[1920px] mx-auto p-6"></div>
  <script>
    const CLIENT_ID = '417822818519-8imosvo7c9e2gem7cp0rse0vm8vrjlou.apps.googleusercontent.com';
    const SCOPES = 'https://www.googleapis.com/auth/drive';
    const DISCOVERY_DOC = 'https://www.googleapis.com/discovery/v1/apis/drive/v3/rest';

    const FILE_NAME = 'sns_calendar_data.json';
    const FOLDER_NAME = 'SNS投稿管理';
    const SHARED_DRIVE_ID = '0AHJk3pS7tSEgUk9PVA';
    const PARENT_FOLDER_ID = '1I23qmcfZ_x8c15NtW54vjhKQb7waJi-E';
    const APP_VERSION = '2025/10/14 12:40';

    const PLATFORM_BADGES = {
      x: { label: 'X', color: 'bg-black' },
      ig: { label: 'IG', color: 'bg-gradient-to-r from-purple-500 to-pink-500' },
      l: { label: 'L', color: 'bg-green-500' },
      m: { label: 'M', color: 'bg-blue-600' },
    };

    let gapiInited = false;
    let gisInited = false;
    let tokenClient;
    let accessToken = null;
    let fileId = null;

    let state = {
      currentDate: new Date(),
      posts: {},
      selectedDate: null,
      editingPostId: null,
      viewMode: 'edit',
      isSignedIn: false,
      isSaving: false,
      folderId: null,
      lastUpdated: null,
